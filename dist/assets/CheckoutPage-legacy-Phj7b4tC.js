System.register(["./index-legacy-DrOZILrB.js","./alert-legacy-CSZWVgyl.js","./promo-legacy-CO1CwUns.js","./BackLink.vue_vue_type_script_setup_true_lang-legacy-zYBMXsEJ.js","./check-legacy-COzjo1qk.js"],function(e,t){"use strict";var a,r,l,s,o,i,c,n,d,u,p,v,m,g,x,b,h,y,f,k,w,A,_,C,M,j,F,T,S,U,B,$,V,D,Z,G,Y,z,H,I,N;return{setters:[e=>{a=e.U,r=e.d,l=e.C,s=e.B,o=e.q,i=e.e,c=e.o,n=e.F,d=e.y,u=e.f,p=e.I,v=e.g,m=e.h,g=e.t,x=e.n,b=e.j,h=e._,y=e.r,f=e.D,k=e.s,w=e.a0,A=e.u,_=e.V,C=e.b,M=e.a1,j=e.p,F=e.c,T=e.i,S=e.z,U=e.k,B=e.v,$=e.w,V=e.a2,D=e.H,Z=e.$,G=e.a3,Y=e.Q},e=>{z=e.u},e=>{H=e.usePromoStore},e=>{I=e._},e=>{N=e.C}],execute:function(){var t=document.createElement("style");t.textContent=".service-card[data-v-7b8345f0]:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(0,0,0,.12)}@media (max-width: 1024px){.service-card[data-v-7b8345f0]{padding:16px}}.icon-pill[data-v-08745cea]{display:inline-flex;align-items:center;justify-content:center;min-width:34px;height:28px;padding:0 8px;border-radius:8px;background:rgba(255,255,255,.3);border:1px solid rgba(255,255,255,.04);font-size:12px}.checkout-btn[data-v-13ec5a91]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;box-shadow:0 10px 25px rgba(59,130,246,.3)}.checkout-btn[data-v-13ec5a91]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 15px 35px rgba(59,130,246,.4)}@media (max-width: 1024px){.checkout-btn[data-v-13ec5a91]{width:100%}}.fade-enter-from[data-v-13ec5a91],.fade-leave-to[data-v-13ec5a91]{opacity:0;transform:translateY(6px)}.fade-enter-active[data-v-13ec5a91],.fade-leave-active[data-v-13ec5a91]{transition:opacity .32s cubic-bezier(.2,.9,.2,1),transform .32s cubic-bezier(.2,.9,.2,1)}.fade-slide-enter-from[data-v-13ec5a91]{opacity:0;transform:translateY(8px)}.fade-slide-enter-to[data-v-13ec5a91]{opacity:1;transform:translateY(0)}.fade-slide-enter-active[data-v-13ec5a91]{transition:opacity .38s cubic-bezier(.22,.9,.36,1),transform .38s cubic-bezier(.22,.9,.36,1)}.fade-slide-leave-from[data-v-13ec5a91]{opacity:1;transform:translateY(0)}.fade-slide-leave-to[data-v-13ec5a91]{opacity:0;transform:translateY(6px)}.fade-slide-leave-active[data-v-13ec5a91]{transition:opacity .26s ease,transform .26s ease}\n/*$vite$:1*/",document.head.appendChild(t);
/**
       * @license lucide-vue-next v0.539.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */
const P=a("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),W=a("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
       * @license lucide-vue-next v0.539.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */function O(e,t="ru"){switch(t){case"ru":{const t=e%10,a=e%100;return 1===t&&11!==a?`${e} день`:t>=2&&t<=4&&(a<10||a>=20)?`${e} дня`:`${e} дней`}case"uk":{const t=e%10,a=e%100;return 1===t&&11!==a?`${e} день`:t>=2&&t<=4&&(a<10||a>=20)?`${e} дні`:`${e} днів`}case"en":return 1===e?`${e} day`:`${e} days`;case"es":return 1===e?`${e} día`:`${e} días`;case"zh":return`${e} 天`;default:return`${e} days`}}const R={class:"flex flex-col gap-6 w-full"},E=["disabled","onClick"],L={class:"flex items-start gap-4 text-dark dark:text-white"},q=["src","alt"],J={class:"flex-1 space-y-2"},K={class:"text-lg sm:text-xl"},Q={class:"text-sm"},X=["innerHTML"],ee={class:"mt-4 grid grid-cols-1 text-dark dark:text-white sm:grid-cols-2 gap-4"},te=["onClick"],ae={class:"flex justify-between items-start xl:items-center"},re={class:"xl:flex xl:items-center xl:gap-2"},le={class:"text-xs px-2 py-1 bg-orange-400 !text-gray-950 rounded-lg"},se={class:"text-right xl:flex xl:items-center"},oe={class:"text-lg font-bold"},ie={class:"text-xs text-dark dark:text-white xl:ml-2"},ce=["onClick"],ne={class:"flex justify-between items-start xl:items-center"},de={class:"xl:flex xl:items-center xl:gap-2"},ue={class:"text-xs px-2 py-1 bg-green-400 !text-gray-950 rounded-lg"},pe={class:"text-right xl:flex xl:items-center"},ve={class:"text-lg font-bold"},me={class:"text-xs text-dark dark:text-white xl:ml-2"},ge={key:0,class:"absolute -top-3 -left-3 bg-green-500 text-white text-xs px-2 py-1 rounded-md shadow"},xe=h(r({__name:"ServiceList",setup(e){const t=l(),a=H(),r=s(),{locale:h,t:y}=o(),{showConfirm:f}=z(),k=new Intl.NumberFormat("en-US",{style:"currency",currency:r.options.currency,minimumFractionDigits:0,maximumFractionDigits:2}),w=(e,t)=>{var a,r,l,s;return null!==(a=null!==(r=null===(l=e.translations[h.value])||void 0===l?void 0:l[t])&&void 0!==r?r:null===(s=e.translations.en)||void 0===s?void 0:s[t])&&void 0!==a?a:null},A=(e,a)=>{const r=t.getSubscriptionType(e)===a;return"trial"===a?["plan-card cursor-pointer rounded-lg p-3 relative border-2",r?"border-orange-400 bg-orange-400/10":"border-transparent glass-card hover:border-orange-400/50"]:["plan-card cursor-pointer rounded-lg p-3 relative border-2",r?"border-green-400 bg-green-400/10":"border-transparent glass-card hover:border-green-400/50"]},_=e=>t.isFree(e)&&!!a.code&&!!a.result&&"free_access"===a.result.type;return(e,a)=>(c(),i("div",R,[(c(!0),i(n,null,d(m(t).items,l=>(c(),i("div",{key:l.id,class:"service-card transition-all duration-300 glass-card rounded-3xl p-4 sm:p-6 relative"},[u("button",{type:"button",class:p(["absolute top-4 right-4 w-9 h-9 rounded-full glass-button flex items-center justify-center transition-colors duration-200 hover:bg-red-500 text-dark dark:text-white hover:text-white",_(l.id)?"opacity-50 cursor-not-allowed hover:bg-transparent hover:text-current":""]),disabled:_(l.id),onClick:e=>!_(l.id)&&(async e=>{(await f({title:y("cart.confirm.remove_single.title"),text:y("cart.confirm.remove_single.text"),confirmText:y("cart.confirm.remove_single.confirm"),cancelText:y("cart.confirm.remove_single.cancel")})).isConfirmed&&t.removeFromCart(e)})(l.id)},[v(m(P),{class:"w-4"})],10,E),u("div",L,[u("img",{src:l.logo,alt:`${w(l,"name")} Logo`,class:"w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0 object-contain"},null,8,q),u("div",J,[u("h3",K,g(w(l,"name")),1),u("p",Q,g(w(l,"subtitle")),1),u("p",{class:"text-sm mt-1",innerHTML:w(l,"short_description_checkout")},null,8,X)])]),u("div",ee,[u("div",{class:p(["plan-card rounded-lg p-3 relative border-2",[A(l.id,"trial"),m(t).isFree(l.id)?"opacity-50 pointer-events-none cursor-not-allowed":"cursor-pointer"]]),onClick:e=>!m(t).isFree(l.id)&&m(t).setSubscriptionType(l.id,"trial")},[u("div",ae,[u("div",re,[a[0]||(a[0]=u("div",{class:"text-lg"},"Trial",-1)),u("div",le,g(e.$t("checkout.trial_badge")),1)]),u("div",se,[u("div",oe,g(m(t).isFree(l.id)?m(k).format(0):m(k).format(l.trial_amount)),1),u("div",ie,[a[1]||(a[1]=u("span",{class:"hidden xl:!inline-flex mr-1"}," / ",-1)),x(" "+g(m(O)(m(r).options.trial_days,m(h))),1)])])])],10,te),u("div",{class:p(["plan-card cursor-pointer rounded-lg p-3 relative border-2",A(l.id,"premium")]),onClick:e=>!m(t).isFree(l.id)&&m(t).setSubscriptionType(l.id,"premium")},[u("div",ne,[u("div",de,[a[2]||(a[2]=u("div",{class:"text-lg"},"Premium",-1)),u("div",ue,g(e.$t("checkout.premium_badge")),1)]),u("div",pe,[u("div",ve,g(m(t).isFree(l.id)?m(k).format(0):m(k).format(l.amount)),1),u("div",me,[a[3]||(a[3]=u("span",{class:"hidden xl:!inline-flex mr-1"}," / ",-1)),x(g(e.$t("perMonth")),1)])])]),m(t).isFree(l.id)?(c(),i("div",ge,g(e.$t("checkout.free_via_promocode",{days:m(t).promoFreeDays[l.id]||0})),1)):b("",!0)],10,ce)])]))),128))]))}}),[["__scopeId","data-v-7b8345f0"]]),be={class:"space-y-3 text-dark dark:text-white"},he={class:"flex items-center gap-3 w-100"},ye={class:"flex-1"},fe={class:"font-medium"},ke={class:"text-xs"},we={class:"mt-2 flex items-center gap-2"},Ae={class:"icon-pill",title:"Apple Pay"},_e=["src"],Ce={class:"icon-pill",title:"Google Pay"},Me=["src"],je={class:"icon-pill",title:"Visa"},Fe=["src"],Te={class:"icon-pill",title:"Mastercard"},Se=["src"],Ue={class:"ml-auto"},Be={class:"flex items-center gap-3 w-100"},$e={class:"flex-1"},Ve={class:"font-medium"},De={class:"text-xs"},Ze={class:"mt-2 flex items-center gap-2"},Ge={class:"icon-pill",title:"Bitcoin"},Ye=["src"],ze={class:"icon-pill",title:"Ethereum"},He=["src"],Ie={class:"icon-pill",title:"Tether"},Ne=["src"],Pe={class:"ml-auto"},We=r({__name:"PaymentList",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,r=t,s=y(a.modelValue),o=l();f(()=>a.modelValue,e=>{s.value=e});const n=k(()=>o.items.some(e=>"trial"===o.getSubscriptionType(e.id))),d=e=>{a.disabled||(s.value=e,r("update:modelValue",e))},v=e=>["payment-method cursor-pointer rounded-lg p-4 border-2 flex items-center gap-3",s.value===e?"border-blue-400 bg-blue-400/10":"border-transparent glass-card hover:border-blue-400/50",n.value&&"crypto"===e?"opacity-50 pointer-events-none":"",a.disabled?"opacity-50 pointer-events-none":""];return(e,t)=>(c(),i("div",be,[u("div",{class:p(v("card")),onClick:t[0]||(t[0]=e=>d("card"))},[u("div",he,[t[2]||(t[2]=w('<div class="w-10 h-10 rounded flex items-center justify-center" data-v-08745cea><svg width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-08745cea><rect x="0.5" y="1" width="27" height="18" rx="3" stroke="currentColor" stroke-opacity="0.9" data-v-08745cea></rect><rect x="3" y="6" width="8" height="2" rx="1" fill="currentColor" fill-opacity="0.9" data-v-08745cea></rect><rect x="3" y="10" width="5" height="2" rx="1" fill="currentColor" fill-opacity="0.9" data-v-08745cea></rect></svg></div>',1)),u("div",ye,[u("div",fe,g(e.$t("checkout.credit_card")),1),u("div",ke,g(e.$t("checkout.credit_card_placeholder")),1),u("div",we,[u("div",Ae,[u("img",{src:m("data:image/png;base64,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"),alt:"Apple Pay",class:"h-3 object-contain object-center"},null,8,_e)]),u("div",Ce,[u("img",{src:m("/ai-bot-front-new/assets/Google_Pay_Logo.svg-h4Y4vlz0.png"),alt:"google pay",class:"h-3 object-contain object-center"},null,8,Me)]),u("div",je,[u("img",{src:m("/ai-bot-front-new/assets/VISA-logo-Bv4jiMXy.png"),alt:"Visa",class:"h-4 object-contain object-center"},null,8,Fe)]),u("div",Te,[u("img",{src:m("/ai-bot-front-new/assets/mastercard-logo-BRj9UBQ9.png"),alt:"mastercard",class:"h-4 object-contain object-center"},null,8,Se)])])]),u("div",Ue,[u("div",{class:p(["w-4 h-4 rounded-full border-2 transition-all duration-300","card"===s.value?"border-blue-400 bg-blue-400":"border-gray-800 dark:border-gray-100"])},null,2)])])],2),u("div",{class:p(v("crypto")),onClick:t[1]||(t[1]=e=>d("crypto"))},[u("div",Be,[t[3]||(t[3]=u("div",{class:"w-10 h-10 rounded flex items-center justify-center"},[u("span",{class:"text-xl"},"₿")],-1)),u("div",$e,[u("div",Ve,g(e.$t("checkout.crypto")),1),u("div",De,g(e.$t("checkout.crypto_placeholder")),1),u("div",Ze,[u("div",Ge,[u("img",{src:m("/ai-bot-front-new/assets/Bitcoin.svg-CDsAdeWD.png"),alt:"bitcoin",class:"h-4 object-contain object-center"},null,8,Ye)]),u("div",ze,[u("img",{src:m("/ai-bot-front-new/assets/Ethereum_logo_translucent-BMe2KU8-.png"),alt:"ethereum",class:"h-4 object-contain object-center"},null,8,He)]),u("div",Ie,[u("img",{src:m("/ai-bot-front-new/assets/tether-logo-v-ijRJKZ.png"),alt:"tether",class:"h-4 object-contain object-center"},null,8,Ne)])])]),u("div",Pe,[u("div",{class:p(["w-4 h-4 rounded-full border-2 transition-all duration-300","crypto"===s.value?"border-blue-400 bg-blue-400":"border-gray-800 dark:border-gray-100"])},null,2)])])],2)]))}}),Oe=h(We,[["__scopeId","data-v-08745cea"]]),Re={class:"max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8 relative z-1"},Ee={key:0,class:"mx-auto grid gap-8 lg:grid-cols-[minmax(0,1fr)_24rem]"},Le={class:"flex items-center justify-between mt-6 mb-2 lg:col-span-2"},qe={class:"text-2xl font-medium md:text-4xl md:font-light text-dark dark:text-white"},Je={class:"min-w-0"},Ke={class:"w-full lg:max-w-sm text-dark dark:text-white font-normal space-y-6"},Qe={class:"glass-card rounded-3xl p-6 relative overflow-hidden"},Xe={class:"space-y-4"},et={class:"space-y-2"},tt={class:"flex justify-between items-center"},at={class:"font-normal"},rt={key:0,class:"flex justify-between items-center text-sm"},lt={key:1,class:"flex justify-between items-center text-sm"},st={key:2,class:"flex justify-between items-center"},ot={class:"font-normal"},it={class:"font-normal"},ct={class:"space-y-2"},nt={class:"flex items-stretch gap-0"},dt=["placeholder","disabled"],ut=["disabled","aria-label"],pt={class:"mt-3 rounded-lg overflow-hidden glass-card"},vt={class:"px-3 py-2"},mt={class:"flex items-center justify-between gap-3"},gt={class:"text-left text-xs text-dark dark:text-white leading-snug"},xt={class:"font-medium"},bt={key:0,class:"mt-3 rounded-lg overflow-hidden glass-card"},ht={class:"px-3 py-2"},yt={class:"text-xs text-dark dark:text-white font-medium mb-1"},ft={class:"font-medium"},kt={class:"ml-2"},wt={key:0,class:"mt-3 rounded-lg overflow-hidden glass-card"},At={class:"px-3 py-2"},_t={class:"flex items-center justify-between gap-3"},Ct={class:"text-left text-xs text-dark dark:text-white leading-snug"},Mt={class:"whitespace-pre-line"},jt={class:"px-2 py-0.5 bg-green-500 text-white rounded-xl text-sm font-semibold"},Ft={class:"glass-card rounded-3xl p-6"},Tt={class:"font-normal mb-4"},St=["disabled"],Ut={key:1,class:"min-h-[30vh] grid place-items-center"},Bt={class:"w-full max-w-md mx-auto px-4"},$t=["innerHTML"],Vt={class:"flex items-center gap-3 mb-4"},Dt={class:"text-xs dark:text-gray-100"},Zt={class:"glass-card rounded-3xl p-4 relative overflow-hidden text-dark dark:text-white"},Gt={class:"font-normal mb-2"},Yt={class:"flex items-stretch gap-0"},zt=["placeholder","disabled"],Ht=["disabled","aria-label"];e("default",h(r({__name:"CheckoutPage",setup(e){const t=A(),a=_(),{showAlert:r}=z(),{locale:x,t:h}=o(),w=l(),P=C(),O=M(),R=s(),E=H(),L=y(""),q=y("");let J=null;const K=k(()=>!!E.code&&!!E.result&&!E.error&&E.code===q.value),Q=k(()=>w.items.length),X=k(()=>{const e=Number(R.options.discount_2||0),t=Number(R.options.discount_3||0);return Q.value>=3?t>0?t:0:2===Q.value&&e>0?e:0}),ee=k(()=>w.subtotalPaid),te=k(()=>ee.value*X.value/100),ae=k(()=>{var e;return"discount"===(null===(e=E.result)||void 0===e?void 0:e.type)?Number(E.result.discount_percent||0):0}),re=k(()=>ee.value*ae.value/100),le=k(()=>Math.max(0,ee.value-te.value-re.value)),se=k(()=>0===le.value&&w.items.length>0),oe=k(()=>{const e=Number(R.options.discount_2||0),t=Number(R.options.discount_3||0);return 1===Q.value?e>0?e:0:2===Q.value&&t>0?t:0}),ie=e=>`${e.toFixed(2)} ${R.options.currency.toUpperCase()}`,ce=k(()=>{if(!L.value)return[];const e=new Date;return w.items.map(t=>{let a;return a="trial"===w.getSubscriptionType(t.id)?ue(e,3):pe(e,1),{id:t.id,name:de(t,"name"),date:ve(a)}})}),ne=k(()=>w.items.some(e=>"trial"===w.getSubscriptionType(e.id))),de=(e,t)=>{var a,r,l,s;return null!==(a=null!==(r=null===(l=e.translations[x.value])||void 0===l?void 0:l[t])&&void 0!==r?r:null===(s=e.translations.en)||void 0===s?void 0:s[t])&&void 0!==a?a:null},ue=(e,t)=>{const a=new Date(e.getTime());return a.setDate(a.getDate()+t),a},pe=(e,t)=>{const a=new Date(e.getTime());return a.setMonth(a.getMonth()+t),a},ve=e=>`${String(e.getDate()).padStart(2,"0")}.${String(e.getMonth()+1).padStart(2,"0")}.${e.getFullYear()}`,me=k(()=>{const e=[];return w.trialServicesCount>0&&e.push(`${w.trialServicesCount} ${h("checkout.trial_services")}`),w.premiumServicesCount>0&&e.push(`${w.premiumServicesCount} ${h("checkout.premium_services")}`),e.join(", ")});j(()=>{O.stop(),E.code&&E.result&&(q.value=E.code,"free_access"===E.result.type&&0===w.promoFreeIds.length&&w.applyFreeAccessServices(E.result.services||[])),window.addEventListener("pageshow",e=>{const t=performance.getEntriesByType("navigation")[0];(e.persisted||"back_forward"===(null==t?void 0:t.type))&&O.stop()}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&O.stop()}),"true"===new URLSearchParams(window.location.search).get("success")&&(w.clearCart(),E.clear(),t.replace({path:"/"}).then(()=>{a.success(h("checkout.success"))}))});const ge=async()=>{se.value?await ye():"card"===L.value?await be():"crypto"===L.value&&await he()};f(se,e=>{e&&(L.value="")});const be=async()=>{O.start();try{const e={services:w.items.map(e=>e.id),subscriptionTypes:w.subscriptionTypes,...E.code?{promocode:E.code}:{}},{data:t}=await Y.post("/mono/create-payment",e,{headers:{Authorization:`Bearer ${P.token}`}});t.url?window.location.href=t.url:(O.stop(),a.error(h("checkout.payment_error")))}catch(t){var e;console.error("Mono payment error:",t);const r=t&&(null===(e=t.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||h("checkout.payment_error");a.error(r),O.stop()}},he=async()=>{O.start();try{const e={services:w.items.map(e=>e.id),...E.code?{promocode:E.code}:{}},{data:t}=await Y.post("/cryptomus/create-payment",e,{headers:{Authorization:`Bearer ${P.token}`}});t.url?window.location.href=t.url:(O.stop(),a.error(h("checkout.payment_error")))}catch(t){var e;console.error("Crypto payment error:",t);const r=t&&(null===(e=t.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||h("checkout.payment_error");a.error(r),O.stop()}},ye=async()=>{try{await w.submitCart({paymentMethod:"free",promocode:E.code||void 0}),await P.fetchUser(),E.clear(),q.value="",a.success(h("checkout.free_success")),await t.push("/")}catch(r){var e;console.error("Free order error:",r);const t=r&&(null===(e=r.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||h("checkout.payment_error");a.error(t)}};function fe(){K.value?(E.clear(),w.removeFreeAccessServices(),q.value=""):async function(){J&&clearTimeout(J),J=window.setTimeout(async()=>{var e,t;await E.apply(q.value),E.error?await r({title:h("alert.title"),text:E.error,icon:"error",confirmText:h("alert.ok")}):"free_access"===(null===(e=E.result)||void 0===e?void 0:e.type)?await w.applyFreeAccessServices(E.result.services||[]):"discount"===(null===(t=E.result)||void 0===t?void 0:t.type)&&0===w.items.length&&await r({title:h("alert.title"),text:h("checkout.promocode_discount_empty_cart"),icon:"success",confirmText:h("alert.ok")})},500)}()}return(e,t)=>{const a=F("i18n-t");return c(),i("div",Re,[m(w).items.length?(c(),i("div",Ee,[u("div",Le,[u("h1",qe,g(e.$t("checkout.title")),1),v(I)]),u("div",Je,[u("form",{class:"space-y-6",onSubmit:T(ge,["prevent"])},[v(xe)],32)]),u("div",Ke,[u("div",Qe,[u("div",Xe,[u("div",et,[u("div",tt,[u("h3",at,g(X.value>0||ae.value>0?e.$t("checkout.original_total"):e.$t("checkout.total_amount"))+": ",1),u("span",{class:p([X.value>0||ae.value>0?"line-through opacity-60":"","font-normal"])},g(ie(ee.value)),3)]),X.value>0?(c(),i("div",rt,[u("span",null,g(e.$t("checkout.discount"))+" ("+g(X.value)+"%)",1),u("span",null,"-"+g(ie(te.value)),1)])):b("",!0),ae.value>0?(c(),i("div",lt,[u("span",null,g(e.$t("checkout.promocode_discount"))+" ("+g(ae.value)+"%)",1),u("span",null,"-"+g(ie(re.value)),1)])):b("",!0),X.value>0||ae.value>0?(c(),i("div",st,[u("h3",ot,g(e.$t("checkout.total_amount"))+":",1),u("span",it,g(ie(le.value)),1)])):b("",!0)]),u("div",ct,[u("div",nt,[U(u("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>q.value=e),placeholder:e.$t("checkout.promocode_placeholder"),class:p(["flex-1 h-11 px-3 border rounded-l-lg rounded-r-none",K.value?"!border-green-400 !bg-green-400/10":"!border-gray-700 dark:!border-gray-300"]),disabled:K.value},null,10,dt),[[B,q.value,void 0,{trim:!0}]]),u("button",{class:p(["h-11 w-12 grid place-items-center border border-l-0 rounded-r-lg rounded-l-none transition-all text-white disabled:opacity-50",K.value?"border-red-500 bg-red-500 hover:bg-red-600 dark:border-red-700 dark:bg-red-900 dark:hover:bg-red-800":"border-blue-500 bg-blue-500 hover:bg-blue-600 dark:border-blue-700 dark:bg-blue-900 dark:hover:bg-blue-800"]),disabled:m(E).loading||!K.value&&!q.value,"aria-label":K.value?e.$t("checkout.promocode_clear_aria"):e.$t("checkout.promocode_apply_aria"),onClick:T(fe,["prevent"])},[K.value?(c(),S(m(W),{key:0,class:"w-5 h-5"})):(c(),S(m(N),{key:1,class:"w-5 h-5"}))],10,ut)])]),u("div",pt,[u("div",vt,[u("div",mt,[u("div",gt,[u("p",xt,g(me.value),1)])])])]),v(Z,{name:"fade",appear:""},{default:$(()=>[""!==L.value?(c(),i("div",bt,[u("div",ht,[u("div",yt,g(e.$t("checkout.next_payments"))+": ",1),v(V,{name:"fade-slide",tag:"ul",class:"text-xs space-y-1 text-dark dark:text-white"},{default:$(()=>[(c(!0),i(n,null,d(ce.value,(e,a)=>(c(),i("li",{key:e.id,class:"flex items-center gap-2",style:D({transitionDelay:60*a+"ms"})},[u("span",ft,g(e.name),1),t[3]||(t[3]=u("span",{class:"ml-2"},"—",-1)),u("span",kt,g(e.date),1)],4))),128))]),_:1})])])):b("",!0)]),_:1}),oe.value>0?(c(),i("div",wt,[u("div",At,[u("div",_t,[u("div",Ct,[u("div",Mt,[v(a,{keypath:"checkout.upsell_generic",tag:"span"},{default:$(()=>t[4]||(t[4]=[u("span",{class:"font-semibold"},"1",-1)])),_:1,__:[4]})])]),u("span",jt," -"+g(oe.value)+"% ",1)])])])):b("",!0)]),m(E).loading?(c(),S(G,{key:0,"expand-padding":!0})):b("",!0)]),u("div",Ft,[u("h3",Tt,g(e.$t("checkout.payment_method")),1),v(Oe,{modelValue:L.value,"onUpdate:modelValue":t[1]||(t[1]=e=>L.value=e),disabled:se.value},null,8,["modelValue","disabled"])]),u("button",{type:"submit",disabled:!se.value&&!L.value||0===m(w).items.length||ne.value&&"crypto"===L.value,class:"checkout-btn w-full py-4 rounded-lg font-normal transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",onClick:T(ge,["prevent"])},g(e.$t("checkout.submit")),9,St)])])):(c(),i("div",Ut,[u("div",Bt,[u("p",{class:"text-center dark:text-gray-100 text-xl mt-5 mb-10",innerHTML:e.$t("checkout.empty")},null,8,$t),u("div",Vt,[t[5]||(t[5]=u("div",{class:"h-px flex-1 bg-gray-500 dark:bg-gray-500"},null,-1)),u("div",Dt,g(e.$t("checkout.promocode_empty_hint")),1),t[6]||(t[6]=u("div",{class:"h-px flex-1 bg-gray-500 dark:bg-gray-500"},null,-1))]),u("div",Zt,[u("h3",Gt,g(e.$t("checkout.title")),1),u("div",Yt,[U(u("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>q.value=e),placeholder:e.$t("checkout.promocode_placeholder"),class:p(["flex-1 h-11 px-3 border rounded-l-lg rounded-r-none",K.value?"!border-green-400 !bg-green-400/10":"!border-gray-700 dark:!border-gray-300"]),disabled:K.value},null,10,zt),[[B,q.value,void 0,{trim:!0}]]),u("button",{class:p(["h-11 w-12 grid place-items-center border border-l-0 rounded-r-lg rounded-l-none transition-all text-white disabled:opacity-50",K.value?"border-red-500 bg-red-500 hover:bg-red-600 dark:border-red-700 dark:bg-red-900 dark:hover:bg-red-800":"border-blue-500 bg-blue-500 hover:bg-blue-600 dark:border-blue-700 dark:bg-blue-900 dark:hover:bg-blue-800"]),disabled:m(E).loading||!K.value&&!q.value,"aria-label":K.value?e.$t("checkout.promocode_clear_aria"):e.$t("checkout.promocode_apply_aria"),onClick:T(fe,["prevent"])},[K.value?(c(),S(m(W),{key:0,class:"w-5 h-5"})):(c(),S(m(N),{key:1,class:"w-5 h-5"}))],10,Ht)]),m(E).loading?(c(),S(G,{key:0})):b("",!0)])])]))])}}}),[["__scopeId","data-v-13ec5a91"]]))}}});
