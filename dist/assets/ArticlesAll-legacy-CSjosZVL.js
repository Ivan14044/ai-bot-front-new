System.register(["./ImageWithFallback.vue_vue_type_script_setup_true_lang-legacy-BNvwOOkz.js","./ArticleCard-legacy-DfSTAYYx.js","./index-legacy-DrOZILrB.js","./BackLink.vue_vue_type_script_setup_true_lang-legacy-zYBMXsEJ.js"],function(e,t){"use strict";var a,r,i,l,o,s,n,d,u,c,v,g,m,y,p,b,f,h,x,k,_;return{setters:[e=>{a=e.u},e=>{r=e.A},e=>{i=e.d,l=e.q,o=e.a1,s=e.a,n=e.u,d=e.s,u=e.p,c=e.D,v=e.e,g=e.o,m=e.f,y=e.j,p=e.g,b=e.t,f=e.F,h=e.y,x=e.z,k=e.I},e=>{_=e._}],execute:function(){const t={class:"max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8 relative"},w={class:"flex items-start justify-between mt-6 mb-10"},N=["innerHTML"],M={key:0,class:"mt-3 text-gray-600 dark:text-gray-300"},$=["innerHTML"],q={key:0},P={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 xl:gap-6"},S={class:"flex items-center justify-center gap-2 mt-10"},j=["disabled"],I=["disabled","onClick"],A=["disabled"];e("default",i({__name:"ArticlesAll",setup(e){const{t:i,locale:C}=l(),F=a(),L=o(),T=s(),H=n(),U=d(()=>{var e;return Number(null!==(e=T.query.limit)&&void 0!==e?e:12)}),z=d(()=>{var e;return Number(null!==(e=T.query.offset)&&void 0!==e?e:0)}),B=d(()=>{const e=void 0!==T.params.page?Number(T.params.page):void 0;if("number"==typeof e&&Number.isFinite(e)&&e>=1)return e;const t=Math.max(1,Number(U.value)||12),a=Math.max(0,Number(z.value)||0);return Math.floor(a/t)+1}),D=d(()=>{const e=Math.max(1,Number(U.value)||12);return(B.value-1)*e}),W=d(()=>{const e=void 0!==T.params.id?Number(T.params.id):void 0;if("number"==typeof e&&Number.isFinite(e))return e;const t=void 0!==T.query.category_id?Number(T.query.category_id):void 0;return"number"==typeof t&&Number.isFinite(t)?t:void 0});d(()=>{var e,t,a,r;const i=Number(null!==(e=null===(t=F.paginatedParams)||void 0===t?void 0:t.offset)&&void 0!==e?e:0),l=Math.max(1,Number(null!==(a=null===(r=F.paginatedParams)||void 0===r?void 0:r.limit)&&void 0!==a?a:U.value)||12);return Math.floor(i/l)});const E=d(()=>void 0!==T.params.id),G=d(()=>"number"==typeof W.value?F.getCategoryById(W.value):void 0),J=d(()=>{var e,t;const a=G.value;if(!a)return"";const r=null===(e=a.translations)||void 0===e||null===(e=e[C.value])||void 0===e?void 0:e.name;return null!==(t=null!=r?r:a.name)&&void 0!==t?t:""}),K=d(()=>W.value&&J.value||String(i("articles.title"))),O=d(()=>{var e;const t=G.value;if(!t)return"";const a=null===(e=t.translations)||void 0===e?void 0:e[C.value],r=null==a?void 0:a.text;if("string"!=typeof r)return"";const i=r.trim();return i.length>0?i:""});async function Q(){await F.fetchArticlesPage({limit:U.value,offset:D.value,categoryId:W.value})}u(async()=>{F.hasCachedPage({limit:U.value,offset:D.value,categoryId:W.value})||L.start();try{if(void 0!==T.query.offset||void 0!==T.query.limit){const e={...T.query};delete e.offset,delete e.limit,delete e.category_id;const t=B.value,a=void 0!==T.params.id,r=t<=1?a?`/categories/${T.params.id}`:"/articles":a?`/categories/${T.params.id}/page/${t}`:`/articles/page/${t}`;await H.replace({path:r,query:e})}F.loaded.categories||await F.fetchCategories(),await Q(),requestAnimationFrame(()=>{try{if("1"===sessionStorage.getItem("articlesUsedSavedPosition"))return void sessionStorage.removeItem("articlesUsedSavedPosition")}catch(e){}window.scrollTo({top:0,left:0,behavior:"smooth"})})}finally{L.stop()}}),c([U,D,W],()=>{!async function(){F.hasCachedPage({limit:U.value,offset:D.value,categoryId:W.value})||L.start();try{await Q(),requestAnimationFrame(()=>{try{if("1"===sessionStorage.getItem("articlesUsedSavedPosition"))return void sessionStorage.removeItem("articlesUsedSavedPosition")}catch(e){}window.scrollTo({top:0,left:0,behavior:"smooth"})})}finally{L.stop()}}()});const R=d(()=>F.getLocalizedPaginatedArticles(C.value)),V=d(()=>F.paginatedTotal),X=d(()=>{const e=Math.max(1,Number(U.value)||12),t=Math.max(0,Number(V.value)||0);return Math.max(1,Math.ceil(t/e))}),Y=d(()=>L.isLoading),Z=d(()=>{var e,t,a,r;const i=B.value,l=Math.max(1,Number(null!==(e=null===(t=F.paginatedParams)||void 0===t?void 0:t.limit)&&void 0!==e?e:U.value)||12),o=Math.max(0,Number(null!==(a=null===(r=F.paginatedParams)||void 0===r?void 0:r.offset)&&void 0!==a?a:0)||0),s=Math.floor(o/l)+1;return i===s?i:s}),ee=d(()=>{const e=X.value,t=Z.value;return e<=6?Array.from({length:e},(e,t)=>t+1):t<=3?[1,2,3,"...",e]:t>=e-2?[1,"...",e-2,e-1,e]:[1,"...",t-1,t,t+1,"...",e]});function te(){const e=Math.max(1,Z.value-1),t="number"==typeof W.value,a=e<=1?t?`/categories/${W.value}`:"/articles":t?`/categories/${W.value}/page/${e}`:`/articles/page/${e}`,r={...T.query};delete r.offset,delete r.limit,delete r.category_id,H.push({path:a,query:r})}function ae(){const e=Math.min(X.value,Z.value+1),t="number"==typeof W.value,a=e<=1?t?`/categories/${W.value}`:"/articles":t?`/categories/${W.value}/page/${e}`:`/articles/page/${e}`,r={...T.query};delete r.offset,delete r.limit,delete r.category_id,H.push({path:a,query:r})}return(e,a)=>(g(),v("div",t,[m("div",w,[m("div",null,[m("h1",{class:"text-2xl font-medium md:text-4xl md:font-light text-dark dark:text-white",innerHTML:K.value},null,8,N),E.value?O.value?(g(),v("div",{key:1,class:"mt-3 text-gray-600 dark:text-gray-300",innerHTML:O.value},null,8,$)):y("",!0):(g(),v("p",M,b(e.$t("articles.description")),1))]),p(_,{class:"self-start"})]),R.value.length>0?(g(),v("div",q,[m("div",P,[(g(!0),v(f,null,h(R.value,e=>{var t;return g(),x(r,{key:e.id,title:e.title,excerpt:e.excerpt,categories:e.categories,"image-url":null!==(t=e.img)&&void 0!==t?t:"/img/no-logo.png",href:`/articles/${e.id}`,date:e.dateString,short:e.short},null,8,["title","excerpt","categories","image-url","href","date","short"])}),128))]),m("div",S,[Z.value>1?(g(),v("button",{key:0,class:"inline-flex items-center justify-center leading-none px-3 py-1.5 rounded border border-gray-300 dark:!border-gray-600/60 text-sm text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-400/30 transition disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:dark:bg-transparent",disabled:Y.value,onClick:te,"aria-label":"Previous page"}," ← ",8,j)):y("",!0),(g(!0),v(f,null,h(ee.value,e=>(g(),v("button",{key:`p-${e}`,class:k(["inline-flex items-center justify-center leading-none px-3 py-1.5 rounded border text-sm transition min-w-[40px] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:dark:bg-transparent",["..."===e?"cursor-default border-transparent text-gray-400":e===Z.value?"border-gray-900 bg-gray-900 text-white dark:!bg-gray-300 dark:!text-gray-900 dark:!border-gray-600/60":"border-gray-300 dark:!border-gray-600/60 text-gray-700 dark:!text-white hover:bg-gray-200 dark:hover:bg-gray-400/30"]]),disabled:"..."===e||Y.value,onClick:t=>"..."!==e&&function(e){if(!Number.isFinite(e)||e<1||e>X.value)return;const t="number"==typeof W.value,a=e<=1?t?`/categories/${W.value}`:"/articles":t?`/categories/${W.value}/page/${e}`:`/articles/page/${e}`,r={...T.query};delete r.offset,delete r.limit,delete r.category_id,H.push({path:a,query:r})}(Number(e))},b(e),11,I))),128)),Z.value<X.value?(g(),v("button",{key:1,class:"inline-flex items-center justify-center leading-none px-3 py-1.5 rounded border border-gray-300 dark:!border-gray-600/60 text-sm text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-400/30 transition disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:dark:bg-transparent",disabled:Y.value,onClick:ae,"aria-label":"Next page"}," → ",8,A)):y("",!0)])])):y("",!0)]))}}))}}});
