import{d as _,b,u as v,a as T,e as k,o as x,f as o,t as i,_ as S}from"./index-D06XNq7w.js";const E="/ai-bot-front-new/img/google.png",A="/ai-bot-front-new/img/telegram.png",C={class:"flex flex-col space-y-4 mt-6"},L={class:"relative"},j={class:"relative flex justify-center text-sm"},O={class:"separator"},B={class:"flex flex-col gap-3"},G={class:"text-white"},I=_({__name:"SocialAuthButtons",setup(R){const a=b(),l=v(),c=T(),g=()=>{const s=window.open("/auth/google/reauth","googleAuth","\n    toolbar=no,\n    location=no,\n    status=no,\n    menubar=no,\n    scrollbars=yes,\n    resizable=yes,\n    width=800,\n    height=600\n  ".replace(/\s+/g,"")),r=async n=>{if(n.origin===window.location.origin)if(n.data.type==="GOOGLE_AUTH_SUCCESS"){const{token:f,user:w}=n.data.data;a.setToken(f),a.setUser(w),window.removeEventListener("message",r);const y=c.query.redirect;l.push(y||"/")}else n.data.type==="GOOGLE_AUTH_ERROR"&&(console.error("Google auth error:",n.data.data.error),window.removeEventListener("message",r))};window.addEventListener("message",r);const h=setInterval(()=>{s!=null&&s.closed&&(window.removeEventListener("message",r),clearInterval(h))},1e3)},u=()=>{window.Telegram?d():m()},m=()=>{if(document.getElementById("telegram-login-script"))return;const e=document.createElement("script");e.id="telegram-login-script",e.src="https://telegram.org/js/telegram-widget.js",e.async=!0,e.onload=d,document.head.appendChild(e)},d=()=>{window.Telegram&&window.Telegram.Login&&window.Telegram.Login.auth({bot_id:""},t=>{t&&p(t)})},p=async e=>{try{const s=await(await fetch("/auth/telegram/callback",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)})).json();if(s.token){a.setToken(s.token),a.setUser(s.user);const r=c.query.redirect;l.push(r||"/")}}catch(t){console.error("Telegram auth error:",t)}};return(e,t)=>(x(),k("div",C,[o("div",L,[t[0]||(t[0]=o("div",{class:"absolute inset-0 flex items-center"},[o("div",{class:"w-full border-t border-gray-200"})],-1)),o("div",j,[o("span",O,i(e.$t("auth.orContinueWith")),1)])]),o("div",B,[o("a",{class:"flex items-center dark:text-white dark:hover:bg-gray-300 dark:hover:text-gray-800 justify-center border border-gray-300 rounded-lg px-4 py-3 hover:bg-gray-50 transition-colors cursor-pointer",onClick:g},[t[1]||(t[1]=o("img",{class:"w-5 h-5 mr-2",src:E,alt:"google"},null,-1)),o("span",null,i(e.$t("auth.google")),1)]),o("button",{class:"flex items-center justify-center border-[#1a94d2] rounded-lg px-4 py-3 bg-[#1a94d2] hover:bg-[#1a94d2]/80 transition-colors",onClick:u},[t[2]||(t[2]=o("img",{class:"w-5 h-5 mr-2",src:A,alt:"telegram"},null,-1)),o("span",G,i(e.$t("auth.telegram")),1)])])]))}}),$=S(I,[["__scopeId","data-v-dde0338f"]]);export{$ as S};
