System.register(["./index-legacy-DrOZILrB.js"],function(t,e){"use strict";var i,a,r,l,n,s,o,c,d,g;return{setters:[t=>{i=t.P,a=t.Q,r=t.d,l=t.r,n=t.s,s=t.e,o=t.o,c=t.H,d=t.h,g=t.a5}],execute:function(){t("u",i("articles",{state:()=>({articleById:{},categories:[],articlesByKey:{},loadedByKey:{},loaded:{categories:!1},paginatedItems:[],paginatedTotal:0,paginatedParams:{limit:12,offset:0,categoryId:void 0},paginatedCache:{}}),getters:{getArticles:t=>e=>{var i;const a="number"==typeof e?`l${e}`:"all";return null!==(i=t.articlesByKey[a])&&void 0!==i?i:[]},getLocalizedArticles:t=>(e,i)=>{var a;const r="number"==typeof i?`l${i}`:"all";return(null!==(a=t.articlesByKey[r])&&void 0!==a?a:[]).filter(t=>Number.isFinite(t.id)).map(t=>{var i,a;const r=t.translations.find(t=>t.locale===e);return{...t,title:null!==(i=null==r?void 0:r.title)&&void 0!==i?i:"No title",excerpt:null!=r&&r.content?String(r.content).slice(0,140):"",short:null!=r&&r.short?String(r.short):null!=r&&r.content?String(r.content).slice(0,140):"",dateString:t.date instanceof Date?t.date.toISOString():String(null!==(a=t.date)&&void 0!==a?a:"")}})},getLocalizedPaginatedArticles:t=>e=>{var i;return(null!==(i=t.paginatedItems)&&void 0!==i?i:[]).filter(t=>Number.isFinite(t.id)).map(t=>{var i,a;const r=t.translations.find(t=>t.locale===e);return{...t,title:null!==(i=null==r?void 0:r.title)&&void 0!==i?i:"No title",excerpt:null!=r&&r.content?String(r.content).slice(0,140):"",short:null!=r&&r.short?String(r.short):null!=r&&r.content?String(r.content).slice(0,140):"",dateString:t.date instanceof Date?t.date.toISOString():String(null!==(a=t.date)&&void 0!==a?a:"")}})},getCategoryById:t=>e=>t.categories.find(t=>t.id===e)},actions:{getPaginatedKey(t){var e,i;return`l${null!==(e=t.limit)&&void 0!==e?e:12}-o${null!==(i=t.offset)&&void 0!==i?i:0}-c${"number"==typeof t.categoryId?t.categoryId:"all"}`},hasCachedPage(t){const e=this.getPaginatedKey(t);return Boolean(this.paginatedCache[e])},normalizeImagePath:t=>t&&"string"==typeof t?t:null,transformTranslations(t){if(Array.isArray(t))return t.map(t=>({locale:t.locale,title:t.title,content:t.content,short:t.short}));if(t&&"object"==typeof t){const e=t;return Object.entries(e).map(([t,e])=>{var i,a,r;return{locale:t,title:null!==(i=null==e?void 0:e.title)&&void 0!==i?i:"",content:null!==(a=null==e?void 0:e.content)&&void 0!==a?a:"",short:null!==(r=null==e?void 0:e.short)&&void 0!==r?r:""}})}return[]},transformCategories:t=>Array.isArray(t)?t.map(t=>{var e;return{id:t.id,name:t.name,translations:null!==(e=t.translations)&&void 0!==e?e:void 0}}):[],transformListItem(t){var e,i,a,r,l;const n=this.transformCategories(null!==(e=null!==(i=t.category)&&void 0!==i?i:t.categories)&&void 0!==e?e:[]),s=this.transformTranslations(null!==(a=t.translations)&&void 0!==a?a:[]),o=null!==(r=null!==(l=t.date)&&void 0!==l?l:t.created_at)&&void 0!==r?r:(new Date).toISOString(),c=this.normalizeImagePath(t.img);return{id:Number(t.id),categories:n,translations:s,img:c,date:new Date(o)}},transformDetailData(t){var e,i,a,r,l;const n=this.transformCategories(null!==(e=null!==(i=t.categories)&&void 0!==i?i:t.category)&&void 0!==e?e:[]),s=this.transformTranslations(null!==(a=t.translations)&&void 0!==a?a:[]),o=null!==(r=null!==(l=t.date)&&void 0!==l?l:t.created_at)&&void 0!==r?r:(new Date).toISOString(),c=this.normalizeImagePath(t.img);return{id:Number(t.id),categories:n,translations:s,img:c,date:new Date(o)}},async fetchArticles(t){const e="number"==typeof t?`l${t}`:"all";if(!this.loadedByKey[e])try{const i=(await a.get("/articles",{params:"number"==typeof t?{limit:t}:void 0})).data,r=(Array.isArray(null==i?void 0:i.items)?i.items:Array.isArray(i)?i:[]).map(t=>this.transformListItem(t)).filter(t=>Number.isFinite(t.id));this.articlesByKey[e]=r;for(const t of r){const e=Number(t.id);Number.isFinite(e)&&(this.articleById[e]||(this.articleById[e]=t))}this.loadedByKey[e]=!0}catch(i){console.error("Error fetching articles:",i)}},async fetchArticlesPage(t){var e,i;const r=null!==(e=t.limit)&&void 0!==e?e:12,l=null!==(i=t.offset)&&void 0!==i?i:0,n=t.categoryId,s=this.getPaginatedKey({limit:r,offset:l,categoryId:n}),o=this.paginatedCache[s];if(o){this.paginatedItems=o.items,this.paginatedTotal=o.total,this.paginatedParams={limit:r,offset:l,categoryId:n};for(const t of this.paginatedItems){const e=Number(t.id);Number.isFinite(e)&&(this.articleById[e]||(this.articleById[e]=t))}}else try{var c;const t=(await a.get("/articles",{params:{limit:r,offset:l,...n?{category_id:n}:{}}})).data,e=Number(null!==(c=null==t?void 0:t.total)&&void 0!==c?c:0),i=Array.isArray(null==t?void 0:t.items)?t.items:[];this.paginatedItems=i.map(t=>this.transformListItem(t)).filter(t=>Number.isFinite(t.id));for(const a of this.paginatedItems){const t=Number(a.id);Number.isFinite(t)&&(this.articleById[t]||(this.articleById[t]=a))}this.paginatedTotal=e,this.paginatedParams={limit:r,offset:l,categoryId:n},this.paginatedCache[s]={items:this.paginatedItems,total:this.paginatedTotal}}catch(d){console.error("Error fetching paginated articles:",d),this.paginatedItems=[],this.paginatedTotal=0,this.paginatedParams={limit:12,offset:0,categoryId:t.categoryId}}},async fetchArticleById(t){const e=Number(t);if(!this.articleById[e])try{var i;const t=null!==(i=(await a.get(`/articles/${e}`)).data)&&void 0!==i?i:null;if(!t)return;const r=this.transformDetailData(t);this.articleById[e]=r}catch(l){var r;if(404===(null==l||null===(r=l.response)||void 0===r?void 0:r.status))throw new Error("404");console.error("Error fetching article detail:",l)}},async fetchCategories(){if(!this.loaded.categories)try{const t=(await a.get("/categories")).data;this.categories=Array.isArray(t)?this.transformCategories(t):[],this.loaded.categories=!0}catch(t){console.error("Error fetching categories:",t)}}}}));const e=["data-original-url"],u=["src","alt"],m="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";t("_",r({inheritAttrs:!1,__name:"ImageWithFallback",props:{src:{},alt:{},style:{}},setup(t){const i=t,a=l(!1);function r(){a.value=!0}const y=i.style,h=n(()=>i.src&&"null"!==i.src&&"undefined"!==i.src?i.src:m);return(t,i)=>(o(),s("div",{class:"block w-full h-full bg-gray-100 overflow-hidden",style:c(d(y))},[a.value?(o(),s("img",g({key:0,src:m,alt:"Error loading image",class:"w-full h-full"},t.$attrs,{"data-original-url":t.src}),null,16,e)):(o(),s("img",g({key:1,src:h.value,alt:t.alt},t.$attrs,{onError:r,class:"w-full h-full object-cover"}),null,16,u))],4))}}))}}});
