import{U as C,d as N,V as M,b as D,r as c,q as F,D as J,e as y,o as u,f as t,t as l,j as h,g as b,k as v,h as g,W as K,v as x,F as O,y as T,I as j,z as E,i as W}from"./index-D06XNq7w.js";import{C as G}from"./check-D_0_rWxA.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=C("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=C("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Q={class:"w-full lg:w-1/2 mx-auto px-4 py-16 sm:px-6 lg:px-8"},R={class:"text-center mb-12"},X={class:"text-4xl font-light text-gray-900 dark:text-white mt-3"},Y={class:"space-y-2"},Z={class:"text-sm text-gray-700 dark:text-gray-300",for:"name"},ee={class:"relative"},te=["placeholder"],ae={key:0,class:"text-red-500 text-sm"},se={class:"space-y-2"},re={class:"text-sm text-gray-700 dark:text-gray-300",for:"email"},oe={class:"relative"},le=["placeholder"],de={key:0,class:"text-red-500 text-sm"},ne={class:"space-y-2"},ie={class:"text-sm text-gray-700 dark:text-gray-300",for:"password"},ce={class:"relative"},ue=["placeholder"],pe={key:0,class:"text-red-500 text-sm"},ye={class:"space-y-2"},ge={class:"text-sm text-gray-700 dark:text-gray-300",for:"password_confirmation"},fe={class:"relative"},me=["placeholder"],he={class:"space-y-2"},be={class:"text-sm text-gray-700 dark:text-gray-300"},ve={class:"text-xs text-gray-500 dark:text-gray-400"},xe={class:"flex flex-wrap gap-3 pt-1"},ke=["disabled","onClick"],_e={type:"submit",class:"w-full text-white py-2 rounded-lg bg-blue-500 dark:bg-blue-900 hover:bg-blue-600 dark:hover:bg-blue-800"},Le=N({__name:"ProfilePage",setup(we){var L,A;const U=M(),n=D(),k=["en","es","ru","uk","zh"],_=c((L=n.user.email)!=null?L:""),w=c((A=n.user.name)!=null?A:""),f=c(""),m=c(""),i=c({}),{t:I}=F();function q(){var S,V;const e=(V=(S=n.user)==null?void 0:S.extension_settings)==null?void 0:V.keyboardLanguages,s=localStorage.getItem("sc_keyboardLanguages");let a=null;try{a=s?JSON.parse(s):null}catch(o){a=null}const r=new Set(k);let d=[];return Array.isArray(e)?d=e.filter(o=>typeof o=="string").map(o=>String(o)).filter(o=>r.has(o)):Array.isArray(a)&&(d=a.filter(o=>typeof o=="string").map(o=>String(o)).filter(o=>r.has(o))),d.includes("en")||d.unshift("en"),Array.from(new Set(d))}const p=c(q()),$=e=>p.value.includes(e),z=e=>{if(e==="en")return;const s=new Set(p.value);s.has(e)?s.delete(e):s.add(e),s.add("en"),p.value=Array.from(s)};J(()=>{var e,s;return(s=(e=n.user)==null?void 0:e.extension_settings)==null?void 0:s.keyboardLanguages},e=>{const s=new Set(k);let a=Array.isArray(e)?e.filter(r=>typeof r=="string").map(r=>String(r)).filter(r=>s.has(r)):[];a.includes("en")||a.unshift("en"),p.value=Array.from(new Set(a))},{immediate:!0});const B=async()=>{var r,d;const e=Array.from(new Set([...p.value||[],"en"])),s={name:w.value,email:_.value,password:f.value,password_confirmation:m.value,extension_settings:{...(d=(r=n.user)==null?void 0:r.extension_settings)!=null?d:{},keyboardLanguages:e}};try{localStorage.setItem("sc_keyboardLanguages",JSON.stringify(e))}catch(S){}const a=await n.update(s);i.value=n.errors,a&&(U.success(I("profile.success")),f.value="",m.value="")};return(e,s)=>(u(),y("div",Q,[t("div",R,[t("h1",X,l(e.$t("profile.title")),1)]),t("form",{class:"space-y-6",onSubmit:W(B,["prevent"])},[t("div",Y,[t("label",Z,l(e.$t("profile.name")),1),t("div",ee,[b(g(K),{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-400 w-5 h-5"}),v(t("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=a=>w.value=a),type:"text",class:"w-full pl-10 pr-4 py-2 border rounded-lg dark:!border-gray-500 dark:text-gray-300",placeholder:e.$t("profile.namePlaceholder"),required:""},null,8,te),[[x,w.value]])]),i.value.name?(u(),y("p",ae,l(i.value.name[0]),1)):h("",!0)]),t("div",se,[t("label",re,l(e.$t("profile.email")),1),t("div",oe,[b(g(H),{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-400 w-5 h-5"}),v(t("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=a=>_.value=a),type:"email",class:"w-full pl-10 pr-4 py-2 border dark:!border-gray-500 rounded-lg dark:text-gray-300",placeholder:e.$t("profile.emailPlaceholder"),required:""},null,8,le),[[x,_.value]])]),i.value.email?(u(),y("p",de,l(i.value.email[0]),1)):h("",!0)]),t("div",ne,[t("label",ie,l(e.$t("profile.password")),1),t("div",ce,[b(g(P),{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-400 w-5 h-5"}),v(t("input",{id:"password","onUpdate:modelValue":s[2]||(s[2]=a=>f.value=a),type:"password",autocomplete:"off",class:"w-full pl-10 pr-4 py-2 border dark:!border-gray-500 rounded-lg dark:text-gray-300",placeholder:e.$t("profile.passwordPlaceholder")},null,8,ue),[[x,f.value]])]),i.value.password?(u(),y("p",pe,l(i.value.password[0]),1)):h("",!0)]),t("div",ye,[t("label",ge,l(e.$t("profile.confirmPassword")),1),t("div",fe,[b(g(P),{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-400 w-5 h-5"}),v(t("input",{id:"password_confirmation","onUpdate:modelValue":s[3]||(s[3]=a=>m.value=a),type:"password",autocomplete:"off",class:"w-full pl-10 pr-4 py-2 border dark:!border-gray-500 rounded-lg dark:text-gray-300",placeholder:e.$t("profile.confirmPasswordPlaceholder")},null,8,me),[[x,m.value]])])]),t("div",he,[t("label",be,l(e.$t("profile.keyboard.title")),1),t("p",ve,l(e.$t("profile.keyboard.hint")),1),t("div",xe,[(u(),y(O,null,T(k,a=>t("button",{key:a,type:"button",disabled:a==="en",class:j(["relative inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 uppercase text-xs font-medium border dark:!border-gray-600 disabled:cursor-not-allowed",$(a)?"bg-blue-600 dark:bg-blue-700 text-white border-blue-600 dark:border-blue-700":"bg-gray-100 text-gray-800 border-gray-300 dark:bg-gray-800 dark:text-gray-300"]),onClick:r=>z(a)},[t("span",null,l(e.$t("profile.keyboard.codes."+a)),1),$(a)?(u(),E(g(G),{key:0,class:"w-3 h-3"})):h("",!0)],10,ke)),64))])]),t("button",_e,l(e.$t("profile.saveButton")),1)],32)]))}});export{Le as default};
