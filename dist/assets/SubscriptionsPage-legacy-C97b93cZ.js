System.register(["./index-legacy-DrOZILrB.js","./alert-legacy-CSZWVgyl.js"],function(t,e){"use strict";var s,i,n,a,r,l,c,o,u,d,g,p,v,x,m,y,b,_,f;return{setters:[t=>{s=t.d,i=t.b,n=t.V,a=t.q,r=t.r,l=t.K,c=t.B,o=t.s,u=t.e,d=t.o,g=t.f,p=t.j,v=t.t,x=t.I,m=t.h,y=t.F,b=t.y,_=t._},t=>{f=t.u}],execute:function(){var e=document.createElement("style");e.textContent=".service-logo[data-v-fe31ef03]{height:100px;padding:10px;width:124px}.service-item[data-v-fe31ef03]{border-bottom:1px solid gray;padding-bottom:10px}\n/*$vite$:1*/",document.head.appendChild(e);const h={class:"w-full lg:w-1/2 mx-auto min-h-[calc(100vh-388px)] px-4 py-16 sm:px-6 lg:px-8"},k={class:"text-center mb-6"},w={class:"text-4xl font-light text-gray-900 dark:text-white mt-3"},$={class:"flex justify-center mt-6 space-x-4"},C={key:0,class:"space-y-6"},j={class:"d-flex align-center gap-3 flex-wrap service-item"},S={class:"flex-1 min-w-[200px]"},T={class:"flex justify-between items-start"},M=["textContent"],H=["textContent"],L=["innerHTML"],F={class:"text-[12px] dark:!text-gray-400"},D={class:"text-[12px] dark:!text-gray-400"},I={key:0,class:"text-[12px] dark:!text-gray-400"},U=["innerHTML"],q=["src","alt"],A={key:0,class:"flex gap-2 mt-2 items-stretch h-8"},B={class:"inline-block w-full h-full text-xs font-medium px-2 py-1 rounded-lg text-center flex items-center justify-center bg-green-400 text-gray-800"},E={key:0,class:"w-1/2"},K=["onClick"],P={key:1,class:"text-center text-gray-500 dark:text-gray-300"};t("default",_(s({__name:"SubscriptionsPage",setup(t){const e=i(),s=n(),{locale:_,t:R}=a(),{showConfirm:V}=f(),Y=r("active"),z=l(),G=c();function J(t){var e,s;const i=z.services.find(e=>e.id===t);return null!==(e=null==i||null===(s=i.translations)||void 0===s||null===(s=s[_.value])||void 0===s?void 0:s.name)&&void 0!==e?e:`#${t}`}function N(t){var e,s;const i=z.services.find(e=>e.id===t);return null!==(e=null==i||null===(s=i.translations)||void 0===s||null===(s=s[_.value])||void 0===s?void 0:s.subtitle)&&void 0!==e?e:null}function O(t){var e;const s=z.services.find(e=>e.id===t);return null!==(e=null==s?void 0:s.logo)&&void 0!==e?e:""}function Q(t){var e;const s=z.services.find(e=>e.id===t);return null!==(e=null==s?void 0:s.amount.toFixed(2))&&void 0!==e?e:""}const W=o(()=>{var t;return null!==(t=e.user)&&void 0!==t&&null!==(t=t.subscriptions)&&void 0!==t&&t.length?e.user.subscriptions.filter(t=>"active"===Y.value?"active"===t.status:"active"!==t.status):[]}),X=function(t){const e=new Date(t);return`${String(e.getDate()).padStart(2,"0")}.${String(e.getMonth()+1).padStart(2,"0")}.${e.getFullYear()}`};return(t,i)=>{var n;return d(),u("div",h,[g("div",k,[g("h1",w,v(t.$t("subscriptions.title")),1),g("div",$,[g("button",{class:x(["px-4 py-2 rounded-lg font-medium","active"===Y.value?"bg-blue-500 dark:bg-blue-900 text-white cursor-default":"bg-gray-300 dark:bg-gray-400 dark:text-gray-800 text-gray-800 hover:!bg-gray-200"]),onClick:i[0]||(i[0]=t=>Y.value="active")},v(t.$t("subscriptions.active_tab")),3),g("button",{class:x(["px-4 py-2 rounded-lg font-medium","inactive"===Y.value?"bg-blue-500 dark:bg-blue-900 text-white cursor-default":"bg-gray-300 dark:bg-gray-400 dark:text-gray-800 text-gray-800 hover:!bg-gray-200"]),onClick:i[1]||(i[1]=t=>Y.value="inactive")},v(t.$t("subscriptions.inactive_tab")),3)])]),null!==(n=m(e).user)&&void 0!==n&&null!==(n=n.subscriptions)&&void 0!==n&&n.length?(d(),u("div",C,[(d(!0),u(y,null,b(W.value,i=>(d(),u("div",{key:i.id,class:"space-y-2 mb-2"},[g("div",j,[g("div",S,[g("div",T,[g("div",null,[g("h3",{class:x(["text-xl font-medium text-gray-900 dark:!text-white",{"mb-1":null===N(i.service_id)}]),textContent:v(t.$t("subscriptions.title_sub",{name:J(i.service_id)}))},null,10,M),N(i.service_id)?(d(),u("h4",{key:0,class:"text-sm text-gray-600 dark:!text-gray-300 font-medium mb-1 mt-0 lh-1",textContent:v(N(i.service_id))},null,8,H)):p("",!0),g("p",{class:"text-sm text-gray-900 dark:!text-gray-400 leading-relaxed",innerHTML:t.$t("plans.price_monthly",{price:Q(i.service_id),currency:m(G).options.currency.toUpperCase()})},null,8,L),g("p",F,v(t.$t("subscriptions.payment_method",{method:t.$t("checkout."+i.payment_method)})),1),g("p",D,v(t.$t("subscriptions.created_at",{date:X(i.created_at)})),1),"credit_card"===i.payment_method&&"active"===i.status?(d(),u(y,{key:1},[i.is_auto_renew?(d(),u("p",I,v(t.$t("subscriptions.next_payment_at",{date:X(i.next_payment_at)})),1)):(d(),u("p",{key:1,class:"text-[12px] dark:!text-gray-400",innerHTML:t.$t("subscriptions.end_at",{date:X(i.next_payment_at)})},null,8,U))],64)):p("",!0)]),g("img",{src:O(i.service_id),alt:J(i.service_id),class:"w-[100px] h-[100px] object-contain object-center service-logo"},null,8,q)]),"active"===i.status?(d(),u("div",A,[g("div",{class:x(["active"!==i.status||"credit_card"!==i.payment_method?"w-full":"w-1/2"])},[g("span",B,v(t.$t("subscriptions.status_"+i.status)),1)],2),"active"===i.status&&"credit_card"===i.payment_method?(d(),u("div",E,[g("button",{type:"button",class:"w-full h-full bg-black text-white rounded-lg hover:bg-gray-800 text-sm",onClick:t=>async function(t,i){const n=1===i;if((await V({title:R(n?"subscriptions.toggle_confirm_title_cancel":"subscriptions.toggle_confirm_title_renew"),text:R(n?"subscriptions.toggle_confirm_text_cancel":"subscriptions.toggle_confirm_text_renew"),confirmText:R("subscriptions.toggle_confirm_yes"),cancelText:R("subscriptions.toggle_confirm_no")})).isConfirmed)try{await e.toggleAutoRenew(t),await e.fetchUser(),s.success(R("subscriptions.toggled_success"))}catch(a){console.log(a),s.error(R("subscriptions.toggled_error"))}}(i.id,i.is_auto_renew)},v(i.is_auto_renew?t.$t("subscriptions.cancel"):t.$t("subscriptions.renew")),9,K)])):p("",!0)])):p("",!0)])])]))),128))])):p("",!0),W.value.length?p("",!0):(d(),u("p",P,v("active"===Y.value?t.$t("subscriptions.empty_active"):t.$t("subscriptions.empty_inactive")),1))])}}}),[["__scopeId","data-v-fe31ef03"]]))}}});
