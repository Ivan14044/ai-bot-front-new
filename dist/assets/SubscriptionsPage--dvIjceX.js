import{d as L,b as A,V as M,q as B,r as D,K as F,B as H,s as N,e as o,o as i,f as n,j as u,t as c,I as p,h as k,F as w,y as V,_ as I}from"./index-D06XNq7w.js";import{u as O}from"./alert-CmjDD-k8.js";const P={class:"w-full lg:w-1/2 mx-auto min-h-[calc(100vh-388px)] px-4 py-16 sm:px-6 lg:px-8"},R={class:"text-center mb-6"},U={class:"text-4xl font-light text-gray-900 dark:text-white mt-3"},q={class:"flex justify-center mt-6 space-x-4"},z={key:0,class:"space-y-6"},E={class:"d-flex align-center gap-3 flex-wrap service-item"},K={class:"flex-1 min-w-[200px]"},Y={class:"flex justify-between items-start"},G=["textContent"],J=["textContent"],Q=["innerHTML"],W={class:"text-[12px] dark:!text-gray-400"},X={class:"text-[12px] dark:!text-gray-400"},Z={key:0,class:"text-[12px] dark:!text-gray-400"},tt=["innerHTML"],et=["src","alt"],st={key:0,class:"flex gap-2 mt-2 items-stretch h-8"},at={class:"inline-block w-full h-full text-xs font-medium px-2 py-1 rounded-lg text-center flex items-center justify-center bg-green-400 text-gray-800"},nt={key:0,class:"w-1/2"},rt=["onClick"],ot={key:1,class:"text-center text-gray-500 dark:text-gray-300"},it=L({__name:"SubscriptionsPage",setup(ct){const g=A(),y=M(),{locale:f,t:l}=B(),{showConfirm:$}=O(),d=D("active"),_=F(),S=H();function h(e){var a,r,t;const s=_.services.find(m=>m.id===e);return(t=(r=(a=s==null?void 0:s.translations)==null?void 0:a[f.value])==null?void 0:r.name)!=null?t:"#".concat(e)}function v(e){var a,r,t;const s=_.services.find(m=>m.id===e);return(t=(r=(a=s==null?void 0:s.translations)==null?void 0:a[f.value])==null?void 0:r.subtitle)!=null?t:null}function C(e){var a;const s=_.services.find(r=>r.id===e);return(a=s==null?void 0:s.logo)!=null?a:""}function T(e){var a;const s=_.services.find(r=>r.id===e);return(a=s==null?void 0:s.amount.toFixed(2))!=null?a:""}const b=N(()=>{var e,s;return(s=(e=g.user)==null?void 0:e.subscriptions)!=null&&s.length?g.user.subscriptions.filter(a=>d.value==="active"?a.status==="active":a.status!=="active"):[]}),x=function(e){const s=new Date(e),a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),t=s.getFullYear();return"".concat(a,".").concat(r,".").concat(t)},j=async function(e,s){const a=s===1;if((await $({title:l(a?"subscriptions.toggle_confirm_title_cancel":"subscriptions.toggle_confirm_title_renew"),text:l(a?"subscriptions.toggle_confirm_text_cancel":"subscriptions.toggle_confirm_text_renew"),confirmText:l("subscriptions.toggle_confirm_yes"),cancelText:l("subscriptions.toggle_confirm_no")})).isConfirmed)try{await g.toggleAutoRenew(e),await g.fetchUser(),y.success(l("subscriptions.toggled_success"))}catch(t){console.log(t),y.error(l("subscriptions.toggled_error"))}};return(e,s)=>{var a,r;return i(),o("div",P,[n("div",R,[n("h1",U,c(e.$t("subscriptions.title")),1),n("div",q,[n("button",{class:p(["px-4 py-2 rounded-lg font-medium",d.value==="active"?"bg-blue-500 dark:bg-blue-900 text-white cursor-default":"bg-gray-300 dark:bg-gray-400 dark:text-gray-800 text-gray-800 hover:!bg-gray-200"]),onClick:s[0]||(s[0]=t=>d.value="active")},c(e.$t("subscriptions.active_tab")),3),n("button",{class:p(["px-4 py-2 rounded-lg font-medium",d.value==="inactive"?"bg-blue-500 dark:bg-blue-900 text-white cursor-default":"bg-gray-300 dark:bg-gray-400 dark:text-gray-800 text-gray-800 hover:!bg-gray-200"]),onClick:s[1]||(s[1]=t=>d.value="inactive")},c(e.$t("subscriptions.inactive_tab")),3)])]),(r=(a=k(g).user)==null?void 0:a.subscriptions)!=null&&r.length?(i(),o("div",z,[(i(!0),o(w,null,V(b.value,t=>(i(),o("div",{key:t.id,class:"space-y-2 mb-2"},[n("div",E,[n("div",K,[n("div",Y,[n("div",null,[n("h3",{class:p(["text-xl font-medium text-gray-900 dark:!text-white",{"mb-1":v(t.service_id)===null}]),textContent:c(e.$t("subscriptions.title_sub",{name:h(t.service_id)}))},null,10,G),v(t.service_id)?(i(),o("h4",{key:0,class:"text-sm text-gray-600 dark:!text-gray-300 font-medium mb-1 mt-0 lh-1",textContent:c(v(t.service_id))},null,8,J)):u("",!0),n("p",{class:"text-sm text-gray-900 dark:!text-gray-400 leading-relaxed",innerHTML:e.$t("plans.price_monthly",{price:T(t.service_id),currency:k(S).options.currency.toUpperCase()})},null,8,Q),n("p",W,c(e.$t("subscriptions.payment_method",{method:e.$t("checkout."+t.payment_method)})),1),n("p",X,c(e.$t("subscriptions.created_at",{date:x(t.created_at)})),1),t.payment_method==="credit_card"&&t.status==="active"?(i(),o(w,{key:1},[t.is_auto_renew?(i(),o("p",Z,c(e.$t("subscriptions.next_payment_at",{date:x(t.next_payment_at)})),1)):(i(),o("p",{key:1,class:"text-[12px] dark:!text-gray-400",innerHTML:e.$t("subscriptions.end_at",{date:x(t.next_payment_at)})},null,8,tt))],64)):u("",!0)]),n("img",{src:C(t.service_id),alt:h(t.service_id),class:"w-[100px] h-[100px] object-contain object-center service-logo"},null,8,et)]),t.status==="active"?(i(),o("div",st,[n("div",{class:p([t.status!=="active"||t.payment_method!=="credit_card"?"w-full":"w-1/2"])},[n("span",at,c(e.$t("subscriptions.status_"+t.status)),1)],2),t.status==="active"&&t.payment_method==="credit_card"?(i(),o("div",nt,[n("button",{type:"button",class:"w-full h-full bg-black text-white rounded-lg hover:bg-gray-800 text-sm",onClick:m=>j(t.id,t.is_auto_renew)},c(t.is_auto_renew?e.$t("subscriptions.cancel"):e.$t("subscriptions.renew")),9,rt)])):u("",!0)])):u("",!0)])])]))),128))])):u("",!0),b.value.length?u("",!0):(i(),o("p",ot,c(d.value==="active"?e.$t("subscriptions.empty_active"):e.$t("subscriptions.empty_inactive")),1))])}}}),ut=I(it,[["__scopeId","data-v-fe31ef03"]]);export{ut as default};
